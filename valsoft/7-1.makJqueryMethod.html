<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>

    <div class="a">1</div>
    <div class="a">2</div>
    <div class="a">3</div>
    <script>
        $('.a').each(function () {
            console.log($(this).html())
        })

        // 어떤모양으로 호출되고있는가를 먼저봐야 한다.
        // 위에서 $('.a')는 함수
        // .each()도 함수
        // each에 들어가는 파라미터는 하나이기때문에 매개변수는 fn만 남는다.
        // call의 this를 바인딩한다.

        var M = function (selector) {
            var elements = $(selector)
            return {
                each: function (fn) {
                    for (var i = 0, len = elements.length; i < len; i = i + 1) {
                        fn.call(elements[i])
                    }
                }
            }
        }

        M('.a').each(function () {
            console.log($(this).html())
        })


    </script>
</body>

</html>